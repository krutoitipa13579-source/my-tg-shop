<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>FashionStore</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- GSAP –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <style>
    body { background: #f9fafb; }
    .product-card { transition: transform .2s ease, box-shadow .2s ease; }
    .product-card:hover { transform: scale(1.05); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    .fade-in { opacity: 0; transform: translateY(20px); }
    .slider { position: relative; overflow: hidden; }
    .slides { display: flex; transition: transform 0.6s ease; }
    .slide { min-width: 100%; }
    .slider-dots { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 6px; }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: #ddd; cursor: pointer; }
    .dot.active { background: #2563eb; }
  </style>
</head>
<body class="font-sans text-gray-800">

  <!-- –•–µ–¥–µ—Ä -->
  <header class="bg-white shadow-md p-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">üëó FashionStore</h1>
    <button onclick="toggleCart()" class="relative bg-blue-500 text-white px-4 py-2 rounded-xl">
      üõí –ö–æ—Ä–∑–∏–Ω–∞ <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-xs rounded-full px-2">0</span>
    </button>
  </header>

  <!-- üî• –°–ª–∞–π–¥–µ—Ä –±–∞–Ω–Ω–µ—Ä–æ–≤ -->
  <section class="slider mt-4 rounded-xl overflow-hidden shadow-lg">
    <div class="slides" id="slides">
      <div class="slide">
        <img src="https://picsum.photos/1200/400?random=11" class="w-full object-cover">
      </div>
      <div class="slide">
        <img src="https://picsum.photos/1200/400?random=12" class="w-full object-cover">
      </div>
      <div class="slide">
        <img src="https://picsum.photos/1200/400?random=13" class="w-full object-cover">
      </div>
    </div>
    <div class="slider-dots" id="slider-dots"></div>
  </section>

  <!-- –ö–∞—Ç–∞–ª–æ–≥ -->
  <main class="p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div class="product-card bg-white rounded-xl shadow p-4 fade-in">
      <img src="https://picsum.photos/300/300?random=1" class="rounded-lg w-full h-64 object-cover">
      <h2 class="mt-3 font-bold text-lg">–§—É—Ç–±–æ–ª–∫–∞ Oversize</h2>
      <p class="text-gray-500">–°—Ç–∏–ª—å–Ω–∞—è —Å–≤–æ–±–æ–¥–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞</p>
      <p class="font-semibold mt-2">1200 —Ä—É–±.</p>
      <select id="size-1" class="border p-2 rounded w-full mt-2">
        <option>–†–∞–∑–º–µ—Ä M</option>
        <option>–†–∞–∑–º–µ—Ä L</option>
        <option>–†–∞–∑–º–µ—Ä XL</option>
      </select>
      <button onclick="addToCart(1, '–§—É—Ç–±–æ–ª–∫–∞ Oversize', 1200, document.getElementById('size-1').value)" class="mt-3 w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="product-card bg-white rounded-xl shadow p-4 fade-in">
      <img src="https://picsum.photos/300/300?random=2" class="rounded-lg w-full h-64 object-cover">
      <h2 class="mt-3 font-bold text-lg">–î–∂–∏–Ω—Å—ã Slim</h2>
      <p class="text-gray-500">–£–¥–æ–±–Ω—ã–µ –¥–∂–∏–Ω—Å—ã –ø—Ä—è–º–æ–≥–æ –∫—Ä–æ—è</p>
      <p class="font-semibold mt-2">2500 —Ä—É–±.</p>
      <select id="size-2" class="border p-2 rounded w-full mt-2">
        <option>–†–∞–∑–º–µ—Ä 30</option>
        <option>–†–∞–∑–º–µ—Ä 32</option>
        <option>–†–∞–∑–º–µ—Ä 34</option>
      </select>
      <button onclick="addToCart(2, '–î–∂–∏–Ω—Å—ã Slim', 2500, document.getElementById('size-2').value)" class="mt-3 w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="product-card bg-white rounded-xl shadow p-4 fade-in">
      <img src="https://picsum.photos/300/300?random=3" class="rounded-lg w-full h-64 object-cover">
      <h2 class="mt-3 font-bold text-lg">–ö—É—Ä—Ç–∫–∞ Bomber</h2>
      <p class="text-gray-500">–õ–µ–≥–∫–∞—è –∫—É—Ä—Ç–∫–∞ –¥–ª—è –æ—Å–µ–Ω–∏</p>
      <p class="font-semibold mt-2">3500 —Ä—É–±.</p>
      <select id="size-3" class="border p-2 rounded w-full mt-2">
        <option>–†–∞–∑–º–µ—Ä M</option>
        <option>–†–∞–∑–º–µ—Ä L</option>
        <option>–†–∞–∑–º–µ—Ä XL</option>
      </select>
      <button onclick="addToCart(3, '–ö—É—Ä—Ç–∫–∞ Bomber', 3500, document.getElementById('size-3').value)" class="mt-3 w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
  </main>

  <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
  <div id="cart-modal" class="fixed top-0 left-0 w-full h-full bg-black/50 hidden flex justify-center items-center">
    <div class="bg-white rounded-xl shadow-lg p-6 w-96">
      <h2 class="text-xl font-bold mb-4">üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>
      <div id="cart-items" class="space-y-2"></div>
      <p id="cart-total" class="mt-4 font-bold">–ò—Ç–æ–≥–æ: 0 —Ä—É–±.</p>
      <button onclick="checkout()" class="mt-4 w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      <button onclick="toggleCart()" class="mt-2 w-full bg-gray-300 py-2 rounded-lg">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <!-- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ -->
  <div id="checkout-modal" class="fixed top-0 left-0 w-full h-full bg-black/50 hidden flex justify-center items-center">
    <div class="bg-white rounded-xl shadow-lg p-6 w-96">
      <h2 class="text-xl font-bold mb-4">üìù –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
      <input id="name" class="border p-2 rounded w-full mb-2" placeholder="–í–∞—à–µ –∏–º—è">
      <input id="phone" class="border p-2 rounded w-full mb-2" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
      <input id="address" class="border p-2 rounded w-full mb-2" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
      <button onclick="submitOrder()" class="mt-2 w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      <button onclick="toggleCheckout()" class="mt-2 w-full bg-gray-300 py-2 rounded-lg">–ù–∞–∑–∞–¥</button>
    </div>
  </div>

  <script>
    let cart = [];
    let currentSlide = 0;

    // üî• –ê–Ω–∏–º–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
    function animateProducts() {
      gsap.to(".fade-in", { duration: 0.8, y: 0, opacity: 1, stagger: 0.2 });
    }
    window.onload = () => { animateProducts(); initSlider(); };

    // üõí –ö–æ—Ä–∑–∏–Ω–∞
    function addToCart(id, name, price, size) {
      const existing = cart.find(p => p.id === id && p.size === size);
      if (existing) existing.quantity++;
      else cart.push({ id, name, price, size, quantity: 1 });
      updateCartUI();
      gsap.from("#cart-count", { scale: 1.5, duration: 0.3, ease: "bounce" });
    }

    function updateCartUI() {
      document.getElementById("cart-count").textContent = cart.reduce((s, p) => s + p.quantity, 0);
      const itemsDiv = document.getElementById("cart-items");
      itemsDiv.innerHTML = "";
      cart.forEach((p, i) => {
        itemsDiv.innerHTML += `<div class="flex justify-between items-center">
          <span>${p.name} (${p.size}) √ó${p.quantity}</span>
          <button onclick="removeFromCart(${i})" class="text-red-500">‚úñ</button>
        </div>`;
      });
      document.getElementById("cart-total").textContent = "–ò—Ç–æ–≥–æ: " + cart.reduce((s, p) => s + p.price * p.quantity, 0) + " —Ä—É–±.";
    }

    function removeFromCart(index) { cart.splice(index, 1); updateCartUI(); }
    function toggleCart() { document.getElementById("cart-modal").classList.toggle("hidden"); }
    function checkout() { toggleCart(); document.getElementById("checkout-modal").classList.remove("hidden"); }
    function toggleCheckout() { document.getElementById("checkout-modal").classList.add("hidden"); }

    // üì¶ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
    async function submitOrder() {
      const customerName = document.getElementById("name").value;
      const customerPhone = document.getElementById("phone").value;
      const shippingAddress = document.getElementById("address").value;
      const totalAmount = cart.reduce((s, p) => s + p.price * p.quantity, 0);

      const orderData = { customerName, customerPhone, shippingAddress, products: cart, totalAmount };

      try {
        await fetch("https://my-tg-shop.onrender.com/webhook", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(orderData)
        });
        if (window.Telegram && window.Telegram.WebApp) {
          window.Telegram.WebApp.sendData(JSON.stringify(orderData));
        }
        document.getElementById("checkout-modal").innerHTML = `
          <div class="text-center">
            <h2 class="text-xl font-bold">‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!</h2>
            <p class="mt-2">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>
          </div>`;
      } catch (e) { alert("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞"); }
    }

    // üé† –°–ª–∞–π–¥–µ—Ä
    function initSlider() {
      const slides = document.getElementById("slides");
      const dotsContainer = document.getElementById("slider-dots");
      const totalSlides = slides.children.length;

      for (let i = 0; i < totalSlides; i++) {
        const dot = document.createElement("div");
        dot.classList.add("dot");
        if (i === 0) dot.classList.add("active");
        dot.onclick = () => showSlide(i);
        dotsContainer.appendChild(dot);
      }

      setInterval(() => { showSlide((currentSlide + 1) % totalSlides); }, 5000);
    }

    function showSlide(index) {
      const slides = document.getElementById("slides");
      const dots = document.querySelectorAll(".dot");
      currentSlide = index;
      slides.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach((d, i) => d.classList.toggle("active", i === index));
    }
  </script>
</body>
  </html>
